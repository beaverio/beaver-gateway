server:
  port: ${SERVER_PORT:8080}

spring:
  config:
    import: optional:file:.env[.properties]
  application:
    name: beaver-core-${ENV:local}

  cloud:
    gateway:
      routes:
        - id: user-service-auth
          uri: ${user-service.url}
          predicates:
            - Path=/auth/**
          filters:
            - name: AddRequestHeader
              args:
                name: X-Gateway-Secret
                value: ${gateway.secret}

        - id: user-service
          uri: ${user-service.url}
          predicates:
            - Path=/users/**
          filters:
            - AuthenticationFilter
            - ContextEnrichmentFilter
            - name: StripPrefix
              args:
                parts: 1
            - name: AddRequestHeader
              args:
                name: X-Gateway-Secret
                value: ${gateway.secret}

logging:
  level:
    com.beaver.core: DEBUG
    org.springframework.cloud.gateway: INFO
    org.springframework.cloud.gateway.handler.FilteringWebHandler: WARN

jwt:
  secret: ${JWT_SECRET}
  accessTokenValidity: ${JWT_ACCESS_VALIDITY}
  refreshTokenValidity: ${JWT_REFRESH_VALIDITY}
  authDisabled: false

gateway:
  secret: ${GATEWAY_SECRET}

# Downstream Services
user-service:
  url: ${USER_SERVICE_URL:http://localhost:8081}